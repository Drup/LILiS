OASISFormat: 0.4
Name:        LILiS
Version:     0.1
Synopsis:    Library to Interpret Lindenmayer Systems
Description: A Library to interpret, evaluate and draw L-systems.
Authors:     Gabriel Radanne <drupyog@zoho.com>
License:     MIT
Plugins:     META (0.3), DevFiles (0.3)
Homepage:    http://drup.github.io/LILiS/

AlphaFeatures: pure_interface, compiled_setup_ml
BuildTools: ocamlbuild


### Various flags ###

Flag sequence
  Description: Build the Sequence interface and use it for glilis.exe
  Default: true

Flag gen
  Description: Build the Gen interface
  Default: false

Flag cfstream
  Description: Build the CFStream interface
  Default: false

Flag cairo
  Description: Enable the cairo backend for png and gtk output
  Default: true

Flag tyxml
  Description: Enable the tyxml backend for svg output
  Default: true

Flag efl
  Description: Enable the efl backend
  Default: false

Flag executable
  Description: Build the executable glilis_ex.native
  Default: false


### Minicalc ###
# A small library to build and compute arithmetic expression trees.

Library minicalc
  Path: mini_calc
  BuildTools: ocamlbuild
  Modules:
    Mini_calc
  InternalModules:
    Calc_type, Calc_eval, Calc_lexer, Calc_parser
  BuildDepends:
    batteries



### Lilis ###
# Library for Lsystems.

Library lilis
  Path: lilis
  BuildDepends: batteries, minicalc
  Modules:
    Lilis, LisUtils
  InternalModules:
    LisCommon, LisLexer, LisParser

# Various streams implementation for lilis.

Library sequence
  Build$: flag(sequence)
  FindLibParent: lilis
  Path: lilis/streams
  BuildDepends: sequence, lilis
  Modules: LisSequence

Library gen
  Build$: flag(gen)
  FindLibParent: lilis
  Path: lilis/streams
  BuildDepends: containers, lilis
  Modules: LisGen

Library cfstream
  Build$: flag(cfstream)
  FindLibParent: lilis
  Path: lilis/streams
  BuildDepends: threads, cfstream, lilis
  Modules: LisCFStream

Library batteries
  FindLibParent: lilis
  Path: lilis/streams
  BuildDepends: batteries, lilis
  Modules: LisBatteries



### Glilis ###
# Graphical extensions of lilis.

Library glilis
  Path: glilis
  Modules: Glilis
  BuildDepends: lilis

Library cairo
  FindlibParent: glilis
  Build$: flag(cairo)
  Path: glilis
  Modules: LisCairo
  BuildDepends: glilis, cairo2, cairo2.lablgtk2

Library tyxml
  FindlibParent: glilis
  Build$: flag(tyxml)
  Path: glilis
  Modules: LisTyxml
  BuildDepends: glilis, tyxml

Library efl
  FindlibParent: glilis
  Build$: flag(efl)
  Path: glilis
  Modules: LisEfl
  BuildDepends: glilis, efl


### Executable ###

Executable glilis
  Build$: flag(cairo) && flag(executable) && flag(sequence) && flag(efl) && flag(tyxml)
  BuildDepends:
    cmdliner, glilis,
    cairo2.lablgtk2, glilis.cairo,
    efl, glilis.efl,
    glilis.tyxml, lilis.sequence
  ByteOpt:    -pp 'cppo -D Tyxml'
  NativeOpt:  -pp 'cppo -D Tyxml'
  Install: false
  Path: glilis
  MainIs: glilis_ex.ml
  CompiledObject: best

# Executable glilis_no_tyxml
#   Build$: flag(cairo) && flag(executable) && flag(sequence) && ! flag(tyxml)
#   BuildDepends: cmdliner, cairo2.lablgtk2, glilis, glilis.cairo, lilis.sequence
#   ByteOpt: -pp 'cppo -U Tyxml'
#   NativeOpt: -pp 'cppo -U Tyxml'
#   Install: false
#   Path: glilis
#   MainIs: glilis_ex.ml
#   CompiledObject: best


### Tests ###

Executable bench_streams
  Path: test
  Build$: flag(tests) && flag(sequence) && flag(gen) && flag(cfstream)
  Install: false
  CompiledObject: best
  BuildTools: ocamlbuild
  MainIs: bench_streams.ml
  BuildDepends: lilis, lilis.batteries, lilis.sequence, lilis.gen, lilis.cfstream, benchmark

Executable bench_vonkoch
  Path: test
  Build$: flag(tests) && flag(sequence) && flag(gen) && flag(cfstream)
  Install: false
  CompiledObject: best
  BuildTools: ocamlbuild
  MainIs: bench_vonkoch.ml
  BuildDepends: lilis, lilis.sequence, lilis.gen, lilis.cfstream, benchmark

Executable bench_quick
  Path: test
  Build$: flag(tests) && flag(sequence) && flag(gen) && flag(cfstream)
  Install: false
  CompiledObject: best
  BuildTools: ocamlbuild
  MainIs: bench_quick.ml
  BuildDepends: lilis, lilis.sequence, lilis.gen, lilis.cfstream, benchmark


### Misc ###

Document lilis
  Install:		false
  Title:		API reference for LILiS
  Type:			ocamlbuild (0.3)
  BuildTools:		ocamldoc, ocamlbuild
  XOCamlbuildPath:	.
  XOCamlbuildLibraries:
    minicalc,
    lilis, lilis.sequence, lilis.batteries,
    glilis, glilis.cairo, glilis.tyxml

SourceRepository master
  Type: git
  Location: https://github.com/Drup/LILiS.git
  Branch: master
  Browser: https://github.com/Drup/LILiS